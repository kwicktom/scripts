/**
*
*   Custom Parser for JavaScript/Node
*
*   @author Nikos M.  
*   https://foo123.github.com/
*   http://nikos-web-development.netai.net/
*
**/
(function(r){var e=require?require("fs"):null,n=/\n\r|\r\n|\r|\n/g,t=/^@(([a-zA-Z0-9\-_]+)\s*(=\[\]|=\{\}|=)?)/,i=/^(@\s*)+/,f=1,u=2,l=0,s=function(r){return r?r.replace(/^\s+/g,"").replace(/\s+$/g,""):r},o=function(r,e){return r=r.split(e),s(r[0])},h=function(r,e){return r&&e==r.substr(0,e.length)},p=function(r,e){var n=r.indexOf(e,1),t=r.substr(1,n-1),i=s(r.substr(n));return[t,i]},a=function(r){var e=r[0];if('"'==e||"'"==e||"`"==e){var n=p(r,e);return n[0]}return s(r)},g=function(r){var e=r[0];if('"'!=e&&"'"!=e&&"`"!=e){r=r.split("=");var n=s(r.shift()),t=r.join("=");if(h(t,"[]"))return[n,[],u];if(h(t,"{}"))return[n,{},f];if(t){t=s(t);var i=t[0];if('"'==i||"'"==i||"`"==i){var o=p(t,i);t=o[0]}}return[n,t,l]}var o=p(r,e),n=o[0];if(r=o[1],r.indexOf("=")>-1){if(r=r.split("="),r.shift(),t=r.join("="),h(t,"[]"))return[n,[],u];if(h(t,"{}"))return[n,{},f];if(t){t=s(t);var i=t[0];('"'==i||"'"==i||"`"==i)&&(o=p(t,i),t=o[0])}return[n,t,l]}},c=self={fromString:function(e){var s,p,c,v,d,x,m,b,y,S,j={},q=j,F=null,O=[],z=l;for(e=""+e,c=e.split(n),v=c.length,s=0;v>s;s++)if(p=o(c[s],"#"),p.length)if(h(p,"@")){if(d=t.exec(p),x=i.exec(p),d){if(F=d[2],d[3]&&"="!=d[3]?"=[]"==d[3]?z=u:"={}"==d[3]&&(z=f):z=l,O.push([F,z]),O.length>1)for(q=j,m=0,l1=O.length-1;l1>m;m++)q=q[O[m][0]];r===q[F]&&(q[F]=u==z?[]:f==z?{}:"")}else if(x){for(y=p.split("@").length-1,m=0;y>m;m++)O.pop();if(q=j,O.length>0){if(O.length>1)for(m=0,b=O.length-1;b>m;m++)q=q[O[m][0]];F=O[O.length-1][0],z=O[O.length-1][1]}else F=null,z=l}}else F&&q&&(f==z?(S=g(p),q[F][S[0]]=S[1],(u==S[2]||f==S[2])&&(O.push([S[0],S[2]]),q=q[F],F=S[0],z=S[2])):u==z?q[F].push(a(p)):(q[F]=a(p),F=null,z=l));return j},fromFile:function(r){return e?self.fromString(e.readFileSync(r)):""}};"undefined"!=typeof module&&module.exports?module.exports=c:"undefined"!=typeof exports?exports=c:this.CustomParser=c}).call(this);