/**
*
*   Custom Parser for JavaScript/Node
*
*   @author Nikos M.  
*   https://foo123.github.com/
*   http://nikos-web-development.netai.net/
*
**/
(function(n,I){var e=require?require("fs"):null,i=/\n\r|\r\n|\r|\n/g,r=function(n){return n.replace(/^\s+/g,"").replace(/\s+$/g,"")},f=function(n,I){return 0===n.indexOf(I)},t=function(n,I){var e=n.indexOf(I,1),i=n.substr(1,e-1),f=r(n.substr(e));return[i,f]},u=self={fromString:function(n){var e,u,E,N,l={},o=null,Y=null;for(n=""+n,E=n.split(i),N=E.length,e=0;N>e;e++)if(u=r(E[e]),!f(u,"#")&&""!=u)if(f(u,"@")){if(f(u,"@DEPENDENCIES")){I===l["@DEPENDENCIES"]&&(l["@DEPENDENCIES"]=[]),o=l["@DEPENDENCIES"],Y="@DEPENDENCIES";continue}if(f(u,"@REPLACE")){I===l["@REPLACE"]&&(l["@REPLACE"]={}),o=l["@REPLACE"],Y="@REPLACE";continue}if(f(u,"@MINIFY")){I===l["@MINIFY"]&&(l["@MINIFY"]={}),o=null,Y="@MINIFY";continue}if(f(u,"@OUT")){I===l["@OUT"]&&(l["@OUT"]=[]),o=l["@OUT"],Y="@OUT";continue}if(o=null,"@MINIFY"==Y){if(f(u,"@UGLIFY")){I===l["@MINIFY"]["@UGLIFY"]&&(l["@MINIFY"]["@UGLIFY"]=[]),o=l["@MINIFY"]["@UGLIFY"];continue}if(f(u,"@CLOSURE")){I===l["@MINIFY"]["@CLOSURE"]&&(l["@MINIFY"]["@CLOSURE"]=[]),o=l["@MINIFY"]["@CLOSURE"];continue}if(f(u,"@YUI")){I===l["@MINIFY"]["@YUI"]&&(l["@MINIFY"]["@YUI"]=[]),o=l["@MINIFY"]["@YUI"];continue}if(f(u,"@CSSMIN")){I===l["@MINIFY"]["@CSSMIN"]&&(l["@MINIFY"]["@CSSMIN"]=[]),o=l["@MINIFY"]["@CSSMIN"];continue}}Y=null}else if(o)if("@REPLACE"==Y){var s=u[0];if('"'==s||"'"==s){var F=t(u,s),M=F[0];if(u=F[1],u.indexOf("=")>-1){var C=r(u.split("=",2)[1]),S=C[0];('"'==S||"'"==S)&&(F=t(C,S),C=F[0]),o[M]=C}}else{var c=u.split("=",2),M=r(c[0]),C=r(c[1]),S=C[0];if('"'==S||"'"==S){var F=t(C,S);C=F[0]}o[M]=C}}else o.push(u);return l},fromFile:function(n){return e?self.fromString(e.readFileSync(n)):""}};"undefined"!=typeof module&&module.exports?module.exports=u:"undefined"!=typeof exports?exports=u:this.CustomParser=u}).call(this);