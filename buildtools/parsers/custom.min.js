/**
*
*   Custom Parser for JavaScript/Node
*
*   @author Nikos M.  
*   https://foo123.github.com/
*   http://nikos-web-development.netai.net/
*
**/
(function(n,r){var e=require?require("fs"):null,I=/\n\r|\r\n|\r|\n/g,i=function(n){return n.replace(/^\s+/g,"").replace(/\s+$/g,"")},t=function(n,r){return r==n.substr(0,r.length)},u=function(n,r){var e=n.indexOf(r,1),I=n.substr(1,e-1),t=i(n.substr(e));return[I,t]},f=function(n){var r=n[0];if('"'==r||"'"==r){var e=u(n,r);return e[0]}return i(n)},E=function(n){var r=n[0];if('"'!=r&&"'"!=r){var e=n.split("=",2),I=i(e[0]),t=i(e[1]),f=t[0];if('"'==f||"'"==f){var E=u(t,f);t=E[0]}return[I,t]}var E=u(n,r),I=E[0];if(n=E[1],n.indexOf("=")>-1){var t=i(n.split("=",2)[1]),f=t[0];return('"'==f||"'"==f)&&(E=u(t,f),t=E[0]),[I,t]}},o=self={fromString:function(n){var e,u,o,N,l={},C={"@REPLACE":1,"@DOC":1},s=null,Y=null;for(n=""+n,o=n.split(I),N=o.length,e=0;N>e;e++)if(u=i(o[e]),!t(u,"#")&&""!=u)if(t(u,"@")){if(t(u,"@DEPENDENCIES")){r===l["@DEPENDENCIES"]&&(l["@DEPENDENCIES"]=[]),s=l["@DEPENDENCIES"],Y="@DEPENDENCIES";continue}if(t(u,"@REPLACE")){r===l["@REPLACE"]&&(l["@REPLACE"]={}),s=l["@REPLACE"],Y="@REPLACE";continue}if(t(u,"@DOC")){r===l["@DOC"]&&(l["@DOC"]={}),s=l["@DOC"],Y="@DOC";continue}if(t(u,"@MINIFY")){r===l["@MINIFY"]&&(l["@MINIFY"]={}),s=null,Y="@MINIFY";continue}if(t(u,"@OUT")){r===l["@OUT"]&&(l["@OUT"]=[]),s=l["@OUT"],Y="@OUT";continue}if(s=null,"@MINIFY"==Y){if(t(u,"@UGLIFY")){r===l["@MINIFY"]["@UGLIFY"]&&(l["@MINIFY"]["@UGLIFY"]=[]),s=l["@MINIFY"]["@UGLIFY"];continue}if(t(u,"@CLOSURE")){r===l["@MINIFY"]["@CLOSURE"]&&(l["@MINIFY"]["@CLOSURE"]=[]),s=l["@MINIFY"]["@CLOSURE"];continue}if(t(u,"@YUI")){r===l["@MINIFY"]["@YUI"]&&(l["@MINIFY"]["@YUI"]=[]),s=l["@MINIFY"]["@YUI"];continue}if(t(u,"@CSSMIN")){r===l["@MINIFY"]["@CSSMIN"]&&(l["@MINIFY"]["@CSSMIN"]=[]),s=l["@MINIFY"]["@CSSMIN"];continue}}Y=null}else if(s)if(C[Y]){var F=E(u);s[F[0]]=F[1]}else s.push(f(u));return l},fromFile:function(n){return e?self.fromString(e.readFileSync(n)):""}};"undefined"!=typeof module&&module.exports?module.exports=o:"undefined"!=typeof exports?exports=o:this.CustomParser=o}).call(this);