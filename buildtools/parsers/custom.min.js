/**
*
*   Custom Parser for JavaScript/Node
*
*   @author Nikos M.  
*   https://foo123.github.com/
*   http://nikos-web-development.netai.net/
*
**/
(function(r){var e=require?require("fs"):null,n=/\n\r|\r\n|\r|\n/g,t=/^@(([a-zA-Z0-9\-_]+)\s*(=\[\]|=\{\}|=)?)/,i=/^(@\s*)+/,f=1,u=2,l=0,s=function(r){return r?r.replace(/^\s+/g,"").replace(/\s+$/g,""):r},o=function(r,e){return r=r.split(e),s(r[0])},a=function(r,e){return r&&e==r.substr(0,e.length)},p=function(r,e){var n=r.indexOf(e,1),t=r.substr(1,n-1),i=s(r.substr(n));return[t,i]},g=function(r){var e=r[0];if('"'==e||"'"==e||"`"==e){var n=p(r,e);return n[0]}return s(r)},h=function(r){var e=r[0];if('"'!=e&&"'"!=e&&"`"!=e){var n=r.split("=",2),t=s(n[0]),i=n[1];if(i&&a(i,"[]"))return[t,[],u];if(i&&a(i,"{}"))return[t,{},f];if(i){i=s(i);var o=i[0];if('"'==o||"'"==o||"`"==o){var g=p(i,o);i=g[0]}}return[t,i,l]}var g=p(r,e),t=g[0];if(r=g[1],r.indexOf("=")>-1){var i=r.split("=",2)[1];if(i&&a(i,"[]"))return[t,[],u];if(i&&a(i,"{}"))return[t,{},f];if(i){i=s(i);var o=i[0];('"'==o||"'"==o||"`"==o)&&(g=p(i,o),i=g[0])}return[t,i,l]}},c=self={fromString:function(e){var s,p,c,v,d,x,m,b,y,S,q={},F=q,O=null,z=[],A=l;for(e=""+e,c=e.split(n),v=c.length,s=0;v>s;s++)if(p=o(c[s],"#"),p.length)if(a(p,"@")){if(d=t.exec(p),x=i.exec(p),d){if(O=d[2],d[3]&&"="!=d[3]?"=[]"==d[3]?A=u:"={}"==d[3]&&(A=f):A=l,z.push([O,A]),z.length>1)for(F=q,m=0,l1=z.length-1;l1>m;m++)F=F[z[m][0]];r===F[O]&&(F[O]=u==A?[]:f==A?{}:"")}else if(x){for(y=p.split("@").length-1,m=0;y>m;m++)z.pop();if(F=q,z.length>0){if(z.length>1)for(m=0,b=z.length-1;b>m;m++)F=F[z[m][0]];O=z[z.length-1][0],A=z[z.length-1][1]}else O=null,A=l}}else O&&F&&(f==A?(S=h(p),F[O][S[0]]=S[1],(u==S[2]||f==S[2])&&(z.push([S[0],S[2]]),F=F[O],O=S[0],A=S[2])):u==A?F[O].push(g(p)):(F[O]=g(p),O=null,A=l));return q},fromFile:function(r){return e?self.fromString(e.readFileSync(r)):""}};"undefined"!=typeof module&&module.exports?module.exports=c:"undefined"!=typeof exports?exports=c:this.CustomParser=c}).call(this);